<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standalone HTML</title>
</head>

<body>

    <!-- Your script to check and display window.vms.tab -->
    <script>
    //     setTimeout(() => {
    //         if (!window.vms?.tab) {
    //             document.getElementsByTagName(
    //                 "body"
    //             )[0].innerHTML = `<h1>Enable "Allow using Client API" under advanced web page settings to use test page</h1>\n
    //             <pre>${JSON.stringify(window.vms?.tab)}</pre>`;
    //         }
    //         // else document.getElementsByTagName('body')[0].innerHTML = `<pre>${JSON.stringify(window.vms?.tab)}</pre>`;
    //     }, 2500);
    //     window.vmsApiInit = async () => {
    //     alert('Running vms Api initialization');
    //   };

    function printAllResourcesToJson() {
      // Get the select element
      // var resourcesList = document.getElementById('resourcesList');
      var resourcesList = window.resourcesList;

      // Create an array to store the details of each option
      var optionsArray = [];

      // Iterate over each option and capture all properties dynamically
      for (var i = 0; i < resourcesList.options.length; i++) {
        var option = resourcesList.options[i];
        var optionDetails = {};

        // Iterate over each property of the option
        for (var j = 0; j < option.attributes.length; j++) {
          var attribute = option.attributes[j];
          optionDetails[attribute.name] = attribute.value;
        }

        // Also include the text and value properties
        optionDetails.value = option.value;

        optionsArray.push(optionDetails);
      }

      // Create a JSON object with the array of options
      var jsonOutput = {
        availableCameras: optionsArray
      };

      // Convert the JSON object to a string for display
      var jsonString = JSON.stringify(jsonOutput, null, 2);

      // Display the JSON string in the HTML
      document.getElementById('jsonOutput').innerHTML = '<pre>' + jsonString + '</pre>';
    }

    setTimeout(function () {
      printAllResourcesToJson();
    }, 100);
    </script>
</body>

</html>